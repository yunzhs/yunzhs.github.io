
##### 数据库锁相关

至少有12种锁

颗粒度分为全局锁（只有逻辑备份时会用），表锁（mylSam只有这个），行锁（mylSam不支持）


##### 表锁分为三大类：

显示表锁：
共享锁，也叫读锁，只能读不能修改
排它锁，也叫写锁，上锁后只允许上锁人进行读写，其他人直到解锁前不允许加任何形式的锁。

元数据锁
是对表结构的一种加锁，也分为读写锁
DML(修改数据)，加读锁
DDL（修改结构），加写锁

意向锁
当想申请行锁时，会先申请意向锁，这样如果有其他人要申请表写锁时，就会去先查意向锁，如果意向锁存在，那么写锁就会被阻塞


##### 行锁
InnoDB独享的锁，优点是颗粒度低，并发高，缺点加锁开支大，容易出现死锁
行锁锁住的索引页，回表时主键的聚簇索引也会加上锁

记录锁：加在索引上，即使这个表没有索引，也会隐形的建一个索引
间歇锁：加在两个索引值之间的锁，区间锁，阻止对这个区间做修改
插入意向锁：只出现在insert操作前，是一种间隙锁，如果另一条插入不在这个间隙内，就不需要等待这个锁解锁就可以操作。

##### java内存泄漏怎么办？

使用MAT，是eclipse上的工具，然后去分析dump文件，从而定位是哪个方法出现问题

dump文件可由jvm提供的诊断命令生成，根据进程号获取。